<div class="container mt-4 d-flex justify-content-center">
  <div *ngIf="product" class="card p-4 product-view-card">
    <div class="row g-4">
      <!-- image column for your listings -->
      <div class="col-md-6">
        <div class="main-image-container" [ngClass]="{'sold-out-card': product.quantity === 0}">
          <app-image-carousel [images]="product.images || []" [objectFit]="'contain'"></app-image-carousel>
        </div>
      </div>

      <!-- details column with description -->
      <div class="col-md-6 d-flex flex-column product-details">
        <h1>{{ product.name }}</h1>

        <p class="description">{{ product.description }}</p>

        <div class="mt-auto">
          <div class="price-container fs-4 mb-3">
            <ng-container *ngIf="product.quantity > 0; else soldOutPrice">
              {{ product.price | currency:'EUR':'symbol' }}
            </ng-container>
            <ng-template #soldOutPrice>
              <span class="original-price-strikethrough">{{ product.price | currency:'EUR':'symbol' }}</span>
              <span class="sold-out-label">Sold Out</span>
            </ng-template>
          </div>

          <p><strong>Available Quantity:</strong> {{ product.quantity }}</p>

          <button *ngIf="product.isProductOwner && isLoggedIn" class="btn btn-success w-100" (click)="goToUpdateProduct(product.productId)">
            Manage Product
          </button>

          <button *ngIf="!product.isProductOwner && isLoggedIn" class="btn btn-success w-100" [disabled]="product.quantity === 0">
            Buy
          </button>

          <p *ngIf="!isLoggedIn" class="text-muted mt-2 text-center">Please log in to buy this product.</p>
          <p *ngIf="product.quantity === 0 && !product.isProductOwner" class="text-danger mt-2 text-center">This product is currently sold out.</p>
        </div>
      </div>
    </div>
  </div>
</div>
