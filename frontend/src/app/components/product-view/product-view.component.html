<div class="container mt-4 d-flex justify-content-center">
  <div *ngIf="product" class="card p-4 product-view-card" style="background-color: transparent;">
    <div class="row g-4">
      <!-- image column for your listings -->
      <div class="col-md-6">
        <div class="main-image-container" [ngClass]="{'sold-out-card': product.quantity === 0}">
          <app-image-carousel [images]="product.images || []" [objectFit]="'contain'"></app-image-carousel>
        </div>
      </div>

      <!-- details column with description -->
      <div class="col-md-6 d-flex flex-column product-details">
        <h1>{{ product.name }}</h1>

        <p class="description">{{ product.description }}</p>

        <div class="mt-auto">
          <div class="price-container fs-4 mb-3">
            <ng-container *ngIf="product.quantity > 0; else soldOutPrice">
              {{ product.price | currency:'EUR':'symbol' }}
            </ng-container>
            <ng-template #soldOutPrice>
              <span class="original-price-strikethrough">{{ product.price | currency:'EUR':'symbol' }}</span>
              <span class="sold-out-label">Sold Out</span>
            </ng-template>
          </div>

          <p>Qty: {{ product.quantity }}</p>

          <button *ngIf="product.isProductOwner && isLoggedIn" class="btn btn-success w-100" (click)="goToUpdateProduct(product.productId)">
            Manage Product
          </button>

          <div class="quantity-selector mt-2 d-flex align-items-center gap-2">
            <label class="me-1">Qty</label>

            <button
              class="btn btn-outline-secondary btn-sm"
              (click)="changeQuantity(-1)"
              [disabled]="selectedQuantity <= 1 || !product || product.quantity === 0 || updating"
            >
              âˆ’
            </button>

            <input
              type="text"
              class="form-control text-center"
              style="width: 60px"
              [value]="selectedQuantity"
              readonly
            />

            <button
              class="btn btn-outline-secondary btn-sm"
              (click)="changeQuantity(+1)"
              [disabled]="!product || selectedQuantity >= product.quantity || product.quantity === 0 || updating"
            >
              +
            </button>
          </div>

          <button *ngIf="!product.isProductOwner && isLoggedIn"
                  class="btn btn-success w-100"
                  [disabled]="product.quantity === 0"
                  (click)="addToCart()"
          >
            Add to Cart
          </button>

          <p *ngIf="!isLoggedIn" class="text-muted mt-2 text-center">Please log in to buy this product.</p>
          <p *ngIf="product.quantity === 0 && !product.isProductOwner" class="text-danger mt-2 text-center">This product is currently sold out.</p>
        </div>
      </div>
    </div>
  </div>
</div>
